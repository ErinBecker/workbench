---
title: "Overview"
---

## Introduction


This section of the website is dedicated to materials you may need when you want
to make a contribution to The Carpentries Workbench. It will detail the minimum
developer environment required to contribute to the components of this project. 

::: {.callout-warning}

### This section is still under construction!

We are still assembling the documentation for this part of the site. If you
would like to contribute, please feel free to open an issue.

:::

The core of The Carpentries Workbench consists of three packages: 

 - [{sandpaper}]\: user interface and workflow engine
 - [{pegboard}]\: parsing and validation engine
 - [{varnish}]\: HTML templates, CSS, and JS elements

These packages are all available and released to the [Carpentries 
R-Universe][r-universe], which checks for updates to the source packages hourly.

### Workflows

In a broad sense, this is what happens when you run `sandpaper::serve()` or
`sandpaper::build_lesson()`. The interaction between the three Workbench
packages, the lesson content, and the author can be summarised like this where
the author makes an edit:

::: {.callout-note}

#### Summary Content

This content is a general picture of what happens between the packages. For a
more in-depth discussion and more detailed diagrams, please visit the [Flow 
Diagrams page](flow.html).

:::

```{mermaid}
sequenceDiagram
    autonumber
    actor Author
    participant Lesson 
    box rgb(255, 214, 216) The Workbench
    participant {sandpaper}
    participant {pegboard}
    participant {varnish}
    end

    Author ->> {sandpaper}: sandpaper::serve()
    activate Author
    {sandpaper} --) Author: website preview
    note left of {sandpaper}: monitor for changes
    Author ->> Lesson: make an edit
    deactivate Author
    Lesson -->> {sandpaper}: READ changed file(s)
    {sandpaper} -->> {pegboard}: validate Lesson
    activate {pegboard}
    note left of {sandpaper}: provision global menu elements
    {pegboard} --) Author: report accessibility 
    deactivate {pegboard}
    activate {sandpaper}
    note left of {sandpaper}: WRITE markdown
    {varnish} -->> {sandpaper}: load and apply website template
    note left of {sandpaper}: WRITE website
    {sandpaper} --) Author: website preview
    deactivate {sandpaper}
```


## Development

Development of The Workbench is overseen by Zhian N. Kamvar. New features are
added incrementally as pull requests. Pushes to the main branch are _rare_ and
discouraged. New features must have tests associated (with the exception of
{varnish}).

If you are interested, we have [documentation for the release
process](releases.html) available.


### Software Tools

Development of Workbench components requires the same toolchain for working on
lessons:

 - R
 - pandoc
 - Git

It is recommended to have the latest versions of R and pandoc available. You
need at least git 2.28 for security purposes.

```{r}
#| echo: false
#| message: true
cat("R version\n---\n")
writeLines(system2(c("R", "--version"), stdout = TRUE))
cat("\npandoc version\n---\n")
writeLines(system2(c("pandoc", "--version"), stdout = TRUE))
cat("\ngit version\n---\n")
writeLines(system2(c("git", "--version"), stdout = TRUE))
```


Once you have these installed, make sure to install ALL of the dependencies for
the workbench:

```{.r}
install.packages(c("sandpaper", "pegboard", "varnish", "tinkr"),
  dependencies = TRUE,
  repos = c(getOption("repos"), "https://carpentries.r-universe.dev"))
```


In addition, you will need the [{devtools}](https://devtools.r-lib.org) for
development.

```{.r}
install.packages("devtools")
```

### Documentation

Reference documentation for individual functions for each package is written
alongside the function using [{roxygen2}](https://roxygen2.r-lib.org/).

This documentation is generated by `devtools::document()`

### Testing

Tests for each package live in `tests/testthat/` and follow a
`test-[file-name].R` naming convention. These are controlled by the
[{testthat}](https://testthat.r-lib.org/) package and run by `devtools::test()`.

Note that {sandpaper} tests take a long time to run and _require_ internet. 

### Continous Integration

The continous integration for each package tests on Ubuntu, MacOS, and Windows
systems with the last five versions of R (same as the RStudio convention). 

--------

Coming up:

 - Testing Pull Requests (Locally and on your fork)
 - Resources for R package development
 - Adding functionality to {sandpaper}
 - Adding functionality to {pegboard}
 - Adding styling elements to {varnish}
 - Adding functionality to carpentries/actions

[{varnish}]: https://carpentries.github.io/varnish/
[{pegboard}]: https://carpentries.github.io/pegboard/
[{sandpaper}]: sandpaper.html
[r-universe]: https://carpentries.r-universe.dev/
